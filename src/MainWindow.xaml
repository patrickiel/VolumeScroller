<Window x:Class="VolumeScroller.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VolumeScroller"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        mc:Ignorable="d"
        SizeToContent="WidthAndHeight"
        Title="Volume Scroller - Settings"
        ResizeMode="NoResize">
    <Window.Resources>
        <local:EnumBooleanConverter x:Key="EnumBooleanConverter" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>
    <DockPanel Margin="10">
        <tb:TaskbarIcon IconSource="{Binding TaskBarIconPath}"
                        ToolTipText="Volume Scroller"
                        MenuActivation="RightClick"
                        TrayLeftMouseUp="TaskbarIcon_TrayLeftMouseUp">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Settings"
                              Click="SettingsMenuItem_Click" />
                    <Separator />
                    <MenuItem Header="Exit"
                              Click="ExitMenuItem_Click" />
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <!-- Volume Increment -->

            <Label Content="Volume increment"
                   Grid.Row="0"
                   Grid.Column="0"
                   HorizontalAlignment="Right"/>
            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        Grid.Row="0">
                <Slider x:Name="IncrementSlider"
                        Width="100"
                        Minimum="2"
                        Maximum="20"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Bottom"
                        Value="{Binding Increment, Mode=TwoWay}"
                        TickPlacement="BottomRight"
                        AutoToolTipPlacement="TopLeft"
                        AutoToolTipPrecision="0"
                        IsSnapToTickEnabled="True"
                        TickFrequency="2" />

                <Label Content="{Binding ElementName=IncrementSlider, Path=Value}" />
            </StackPanel>
            <!-- Run on startup -->
            <Label Content="Run on startup"
                   Grid.Row="1"
                   Grid.Column="0"
                   HorizontalAlignment="Right" />
            <CheckBox Grid.Row="1"
                      Grid.Column="1"
                      VerticalAlignment="Center"
                      IsChecked="{Binding RunOnStartup, Mode=TwoWay}" />
                      
            <!-- Enable Ctrl+Scroll for Mute/Unmute -->
            <Label Content="Ctrl+Scroll for Mute/Unmute"
                   Grid.Row="2"
                   Grid.Column="0"
                   HorizontalAlignment="Right" />
            <CheckBox Grid.Row="2"
                      Grid.Column="1"
                      VerticalAlignment="Center"
                      IsChecked="{Binding EnableCtrlMute, Mode=TwoWay}" />

            <!-- Mode Selection -->
            <TextBlock Grid.Row="4"
                       Grid.Column="0"
                       Grid.ColumnSpan="2"
                       Text="Mode"
                       FontWeight="Bold"
                       Margin="0,10,0,5"
                       HorizontalAlignment="Left" />

            <StackPanel Grid.Row="5"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        Margin="5">
                <RadioButton Content="Taskbar (Works with visible or hidden taskbar)"
                             Margin="0,3,0,3"
                             IsChecked="{Binding Mode, ConverterParameter=TaskbarAlways, Converter={StaticResource EnumBooleanConverter}}"
                             GroupName="TriggerMode" />
                
                <RadioButton Content="Taskbar Visible (Requires visible taskbar)"
                             Margin="0,3,0,3"
                             IsChecked="{Binding Mode, ConverterParameter=TaskbarVisibleOnly, Converter={StaticResource EnumBooleanConverter}}"
                             GroupName="TriggerMode" />

                <RadioButton Content="Screen Borders"
                             Margin="0,3,0,3"
                             IsChecked="{Binding Mode, ConverterParameter=ScreenBorders, Converter={StaticResource EnumBooleanConverter}}"
                             GroupName="TriggerMode" />
            </StackPanel>

            <!-- Screen Edges Settings Section -->
            <Border Grid.Row="6"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    BorderBrush="LightGray"
                    BorderThickness="1"
                    Margin="0,5,0,5"
                    Padding="5"
                    IsEnabled="{Binding IsBordersModeSelected}">
                <StackPanel>
                    <TextBlock Text="Screen Borders Settings"
                               FontWeight="Bold"
                               Margin="0,0,0,5"
                               HorizontalAlignment="Left" />

                    <!-- Edge Tolerance -->
                    <StackPanel Orientation="Horizontal">
                        <Label Content="Tolerance"
                               HorizontalAlignment="Left" />
                        <TextBox Width="50"
                                 Margin="5,0"
                                 PreviewTextInput="EdgeTolerance_PreviewTextInput"
                                 PreviewKeyDown="EdgeTolerance_PreviewKeyDown"
                                 VerticalAlignment="Center">
                            <TextBox.Text>
                                <Binding Path="EdgeTolerance"
                                         Mode="TwoWay"
                                         UpdateSourceTrigger="PropertyChanged">
                                    <Binding.ValidationRules>
                                        <local:EdgeToleranceValidationRule />
                                    </Binding.ValidationRules>
                                </Binding>
                            </TextBox.Text>
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Style.Triggers>
                                        <Trigger Property="Validation.HasError" Value="True">
                                            <Setter Property="ToolTip" 
                                                    Value="{Binding RelativeSource={RelativeSource Self}, 
                                                    Path=(Validation.Errors)[0].ErrorContent}" />
                                            <Setter Property="Background" Value="#FFEBEE" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBox.Style>
                        </TextBox>
                        <Label Content="px" 
                               Margin="0,0,5,0"
                               VerticalAlignment="Center" />
                    </StackPanel>

                    <!-- Schematic Screen Border Selector -->
                    <Grid Margin="0,10,0,5" HorizontalAlignment="Center">
                        <Grid.Resources>
                            <!-- Style for corner toggle buttons -->
                            <Style x:Key="CornerToggleStyle" TargetType="ToggleButton">
                                <Setter Property="Width" Value="24"/>
                                <Setter Property="Height" Value="24"/>
                                <Setter Property="Background" Value="#E0E0E0"/>
                                <Setter Property="BorderBrush" Value="#888"/>
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ToggleButton">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="2">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter Property="Background" Value="#4CAF50"/>
                                        <Setter Property="BorderBrush" Value="#388E3C"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="BorderBrush" Value="#333"/>
                                    </Trigger>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter Property="Background" Value="#F0F0F0"/>
                                        <Setter Property="BorderBrush" Value="#CCC"/>
                                        <Setter Property="Opacity" Value="0.5"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                            <!-- Style for horizontal edge toggle buttons -->
                            <Style x:Key="HorizontalEdgeToggleStyle" TargetType="ToggleButton">
                                <Setter Property="Height" Value="16"/>
                                <Setter Property="Background" Value="#E0E0E0"/>
                                <Setter Property="BorderBrush" Value="#888"/>
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ToggleButton">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="2">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter Property="Background" Value="#4CAF50"/>
                                        <Setter Property="BorderBrush" Value="#388E3C"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="BorderBrush" Value="#333"/>
                                    </Trigger>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter Property="Background" Value="#F0F0F0"/>
                                        <Setter Property="BorderBrush" Value="#CCC"/>
                                        <Setter Property="Opacity" Value="0.5"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                            <!-- Style for vertical edge toggle buttons -->
                            <Style x:Key="VerticalEdgeToggleStyle" TargetType="ToggleButton">
                                <Setter Property="Width" Value="16"/>
                                <Setter Property="Background" Value="#E0E0E0"/>
                                <Setter Property="BorderBrush" Value="#888"/>
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ToggleButton">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="2">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter Property="Background" Value="#4CAF50"/>
                                        <Setter Property="BorderBrush" Value="#388E3C"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="BorderBrush" Value="#333"/>
                                    </Trigger>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter Property="Background" Value="#F0F0F0"/>
                                        <Setter Property="BorderBrush" Value="#CCC"/>
                                        <Setter Property="Opacity" Value="0.5"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Resources>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="2"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="2"/>
                            <RowDefinition Height="24"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="24"/>
                            <ColumnDefinition Width="2"/>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="2"/>
                            <ColumnDefinition Width="24"/>
                        </Grid.ColumnDefinitions>

                        <!-- Top Row: TopLeft Corner, Top Edge, TopRight Corner -->
                        <ToggleButton Grid.Row="0" Grid.Column="0"
                                      Style="{StaticResource CornerToggleStyle}"
                                      IsChecked="{Binding EnableTopLeft, Mode=TwoWay}"
                                      ToolTip="Top Left Corner"/>
                        <ToggleButton Grid.Row="0" Grid.Column="2"
                                      Style="{StaticResource HorizontalEdgeToggleStyle}"
                                      IsChecked="{Binding EnableTopEdge, Mode=TwoWay}"
                                      ToolTip="Top Edge"
                                      Height="24"/>
                        <ToggleButton Grid.Row="0" Grid.Column="4"
                                      Style="{StaticResource CornerToggleStyle}"
                                      IsChecked="{Binding EnableTopRight, Mode=TwoWay}"
                                      ToolTip="Top Right Corner"/>

                        <!-- Middle Row: Left Edge, Screen Area, Right Edge -->
                        <ToggleButton Grid.Row="2" Grid.Column="0"
                                      Style="{StaticResource VerticalEdgeToggleStyle}"
                                      IsChecked="{Binding EnableLeftEdge, Mode=TwoWay}"
                                      ToolTip="Left Edge"
                                      Width="24"/>
                        <Border Grid.Row="2" Grid.Column="2"
                                Background="#F5F5F5"
                                BorderBrush="#CCC"
                                BorderThickness="1"
                                Height="70">
                            <TextBlock Text="Screen"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Foreground="#999"
                                       FontSize="12"/>
                        </Border>
                        <ToggleButton Grid.Row="2" Grid.Column="4"
                                      Style="{StaticResource VerticalEdgeToggleStyle}"
                                      IsChecked="{Binding EnableRightEdge, Mode=TwoWay}"
                                      ToolTip="Right Edge"
                                      Width="24"/>

                        <!-- Bottom Row: BottomLeft Corner, Bottom Edge, BottomRight Corner -->
                        <ToggleButton Grid.Row="4" Grid.Column="0"
                                      Style="{StaticResource CornerToggleStyle}"
                                      IsChecked="{Binding EnableBottomLeft, Mode=TwoWay}"
                                      ToolTip="Bottom Left Corner"/>
                        <ToggleButton Grid.Row="4" Grid.Column="2"
                                      Style="{StaticResource HorizontalEdgeToggleStyle}"
                                      IsChecked="{Binding EnableBottomEdge, Mode=TwoWay}"
                                      ToolTip="Bottom Edge"
                                      Height="24"/>
                        <ToggleButton Grid.Row="4" Grid.Column="4"
                                      Style="{StaticResource CornerToggleStyle}"
                                      IsChecked="{Binding EnableBottomRight, Mode=TwoWay}"
                                      ToolTip="Bottom Right Corner"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Close Button -->
            <Button Content="Close"
                    Grid.Row="10"
                    Grid.Column="1"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Width="80"
                    Height="22"
                    Margin="0,10,0,0"
                    Click="CloseButton_Click" />
        </Grid>
    </DockPanel>
</Window>